<main class="preview-wrapper">
    <div class="preview-page">
        <!-- ERROR MESSAGE -->
        <!-- <div *ngIf="errorMessage && showToast" class="my-toast align-items-center" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body">
                    <p>{{ errorMessage }}</p>
                    <p>Please try again later.</p>
                </div>
                <button type="button" class="btn-close btn-close-black m-auto" (click)="showToast = false" aria-label="Close"></button>
            </div>
        </div> -->

        <section class="preview-content">
            <div class="preview-header">
                <div class="preview-details">
                    <h5>Opname Preview</h5>
                    <!-- placeholder -->
                    <p>Site name</p>
                    <p>Started on [date]</p>
                </div>
                
                <button class="btn btn-close" (click)="closePreview()"></button>
            </div>

            <hr class="divider">

            <div class="preview-body">
                <div class="table-section">
                    <div class="header-original">
                        <h6>Original Data</h6>
                        
                        <!-- Original data table -->
                        <div class="table-container">
                            <table mat-table [dataSource]="dataSource" class="assets-table">
                                <!-- Asset Tag Column -->
                                <ng-container matColumnDef="assetTag">
                                    <th mat-header-cell *matHeaderCellDef>Asset Tag</th>
                                    <td mat-cell *matCellDef="let element" class="asset-tag-cell">{{ element.assetTag }}</td>
                                </ng-container>

                                <!-- Asset Name Column -->
                                <ng-container matColumnDef="assetName">
                                    <th mat-header-cell *matHeaderCellDef>Asset Name</th>
                                    <td mat-cell *matCellDef="let element" class="asset-name-cell" [title]="element.assetName">
                                        {{ element.assetName }}
                                    </td>
                                </ng-container>

                                <!-- Serial Number Column -->
                                <ng-container matColumnDef="serialNumber">
                                    <th mat-header-cell *matHeaderCellDef>Serial Number</th>
                                    <td mat-cell *matCellDef="let element">{{ element.serialNumber }}</td>
                                </ng-container>

                                <!-- Equipment Column -->
                                <ng-container matColumnDef="equipments">
                                    <th mat-header-cell *matHeaderCellDef>Equipment</th>
                                    <td mat-cell *matCellDef="let element" class="equipment-cell" [title]="element.equipments">
                                        {{ element.equipments }}
                                    </td>
                                </ng-container>

                                <!-- Region Column -->
                                <ng-container matColumnDef="regionName">
                                    <th mat-header-cell *matHeaderCellDef>Region</th>
                                    <td mat-cell *matCellDef="let element" class="location-cell" [title]="element.regionName">
                                        {{ element.regionName }}
                                    </td>
                                </ng-container>

                                <!-- Site Group Column -->
                                <ng-container matColumnDef="siteGroupName">
                                    <th mat-header-cell *matHeaderCellDef>Site Group</th>
                                    <td mat-cell *matCellDef="let element" class="location-cell" [title]="element.siteGroupName">
                                        {{ element.siteGroupName }}
                                    </td>
                                </ng-container>

                                <!-- Site Column -->
                                <ng-container matColumnDef="siteName">
                                    <th mat-header-cell *matHeaderCellDef>Site</th>
                                    <td mat-cell *matCellDef="let element" class="location-cell" [title]="element.siteName">
                                        {{ element.siteName }}
                                    </td>
                                </ng-container>

                                <!-- Sub Site Column -->
                                <ng-container matColumnDef="subSiteName">
                                    <th mat-header-cell *matHeaderCellDef>Owner Site</th>
                                    <td mat-cell *matCellDef="let element" class="location-cell" [title]="element.subSiteName">
                                        {{ element.subSiteName }}
                                    </td>
                                </ng-container>

                                <!-- Room Column -->
                                <ng-container matColumnDef="room">
                                    <th mat-header-cell *matHeaderCellDef>Room</th>
                                    <td mat-cell *matCellDef="let element" class="location-cell" [title]="element.room">
                                        {{ element.room }}
                                    </td>
                                </ng-container>

                                <!-- User Name Column -->
                                <ng-container matColumnDef="userName">
                                    <th mat-header-cell *matHeaderCellDef>User</th>
                                    <td mat-cell *matCellDef="let element" class="user-name-cell" [title]="element.userName">
                                        {{ element.userName }}
                                    </td>
                                </ng-container>

                                <!-- Position Column -->
                                <ng-container matColumnDef="position">
                                    <th mat-header-cell *matHeaderCellDef>Position</th>
                                    <td mat-cell *matCellDef="let element" class="position-cell" [title]="element.position">
                                        {{ element.position }}
                                    </td>
                                </ng-container>

                                <!-- Division Column -->
                                <ng-container matColumnDef="division">
                                    <th mat-header-cell *matHeaderCellDef>Division</th>
                                    <td mat-cell *matCellDef="let element" class="organization-cell" [title]="element.division">
                                        {{ element.division }}
                                    </td>
                                </ng-container>

                                <!-- Department Column -->
                                <ng-container matColumnDef="department">
                                    <th mat-header-cell *matHeaderCellDef>Department</th>
                                    <td mat-cell *matCellDef="let element" class="organization-cell" [title]="element.department">
                                        {{ element.department }}
                                    </td>
                                </ng-container>

                                <!-- Cost Center Column -->
                                <ng-container matColumnDef="costCenter">
                                    <th mat-header-cell *matHeaderCellDef>Cost Center</th>
                                    <td mat-cell *matCellDef="let element">{{ element.costCenter }}</td>
                                </ng-container>

                                <!-- Condition Column -->
                                <ng-container matColumnDef="condition">
                                    <th mat-header-cell *matHeaderCellDef>Condition</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span class="condition-badge" [ngClass]="{
                                            'condition-good': element.condition === true,
                                            'condition-bad': element.condition === false
                                        }">
                                        {{ element.condition === true ? 'Good' : 'Bad' }}
                                        </span>
                                    </td>
                                </ng-container>

                                <!-- Status Column -->
                                <ng-container matColumnDef="status">
                                    <th mat-header-cell *matHeaderCellDef>Status</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span class="asset-status" [ngClass]="{
                                            'status-deployed': element.status === 'Deployed',
                                            'status-onloan': element.status === 'On Loan',
                                            'status-inventory': element.status === 'In Inventory',
                                            'status-repair': element.status === 'In Repair',
                                            'status-down': element.status === 'Down',
                                            'status-disposed': element.status === 'Disposed'
                                        }">
                                        {{ element.status }}
                                        </span>
                                    </td>
                                </ng-container>

                                <!-- Asset Opname Status Column -->
                                <ng-container matColumnDef="processingStatus">
                                    <th mat-header-cell *matHeaderCellDef>Process</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span class="processing-status" [ngClass]="{
                                            'status-pending': element.processingStatus === 'pending',
                                            'status-edited': element.processingStatus === 'edited',
                                            'status-all-good': element.processingStatus === 'all_good',
                                        }">
                                        {{ element.processingStatus === 'pending' ? 'Pending' : element.processingStatus === 'edited' ? 'Diperbarui' : 'Sesuai' }}
                                        </span>
                                    </td>
                                </ng-container>

                                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                            </table>
                        </div>
                    </div>

                    <div class="header-updated">
                        <h6>Updated Data</h6>
                        <!-- Updated data table will go here -->

                        <div class="table-container">
                            <table mat-table [dataSource]="dataSource" class="assets-table">
                                <!-- Asset Tag Column -->
                                <ng-container matColumnDef="assetTag">
                                    <th mat-header-cell *matHeaderCellDef>Asset Tag</th>
                                    <td mat-cell *matCellDef="let element" class="asset-tag-cell">{{ element.assetTag }}</td>
                                </ng-container>

                                <!-- Asset Name Column -->
                                <ng-container matColumnDef="assetName">
                                    <th mat-header-cell *matHeaderCellDef>Asset Name</th>
                                    <td mat-cell *matCellDef="let element" class="asset-name-cell" [title]="element.assetName">{{ element.assetName }}
                                    </td>
                                </ng-container>

                                <!-- Serial Number Column -->
                                <ng-container matColumnDef="serialNumber">
                                    <th mat-header-cell *matHeaderCellDef>Serial Number</th>
                                    <td mat-cell *matCellDef="let element">{{ element.serialNumber }}</td>
                                </ng-container>

                                <!-- User Name Column -->
                                <ng-container matColumnDef="userName">
                                    <th mat-header-cell *matHeaderCellDef>User</th>
                                    <td mat-cell *matCellDef="let element" class="user-name-cell" [title]="element.userName">
                                        {{ element.userName }}
                                    </td>
                                </ng-container>

                                <!-- Position Column -->
                                <ng-container matColumnDef="position">
                                    <th mat-header-cell *matHeaderCellDef>Position</th>
                                    <td mat-cell *matCellDef="let element" class="position-cell" [title]="element.position">
                                        {{ element.position }}
                                    </td>
                                </ng-container>

                                <!-- Division Column -->
                                <ng-container matColumnDef="division">
                                    <th mat-header-cell *matHeaderCellDef>Division</th>
                                    <td mat-cell *matCellDef="let element" class="organization-cell" [title]="element.division">
                                        {{ element.division }}
                                    </td>
                                </ng-container>

                                <!-- Department Column -->
                                <ng-container matColumnDef="department">
                                    <th mat-header-cell *matHeaderCellDef>Department</th>
                                    <td mat-cell *matCellDef="let element" class="organization-cell" [title]="element.department">
                                        {{ element.department }}
                                    </td>
                                </ng-container>

                                <!-- Cost Center Column -->
                                <ng-container matColumnDef="costCenter">
                                    <th mat-header-cell *matHeaderCellDef>Cost Center</th>
                                    <td mat-cell *matCellDef="let element">{{ element.costCenter }}</td>
                                </ng-container>

                                <!-- Condition Column -->
                                <ng-container matColumnDef="condition">
                                    <th mat-header-cell *matHeaderCellDef>Condition</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span class="condition-badge" [ngClass]="{
                                            'condition-good': element.condition === true,
                                            'condition-bad': element.condition === false
                                        }">
                                        {{ element.condition === true ? 'Good' : 'Bad' }}
                                        </span>
                                    </td>
                                </ng-container>

                                <!-- Status Column -->
                                <ng-container matColumnDef="status">
                                    <th mat-header-cell *matHeaderCellDef>Status</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span class="asset-status" [ngClass]="{
                                            'status-deployed': element.status === 'Deployed',
                                            'status-onloan': element.status === 'On Loan',
                                            'status-inventory': element.status === 'In Inventory',
                                            'status-repair': element.status === 'In Repair',
                                            'status-down': element.status === 'Down',
                                            'status-disposed': element.status === 'Disposed'
                                        }">
                                        {{ element.status }}
                                        </span>
                                    </td>
                                </ng-container>

                                <!-- Equipment Column -->
                                <ng-container matColumnDef="equipments">
                                    <th mat-header-cell *matHeaderCellDef>Equipment</th>
                                    <td mat-cell *matCellDef="let element" class="equipment-cell" [title]="element.equipments">
                                        {{ element.equipments }}
                                    </td>
                                </ng-container>

                                <!-- Region Column -->
                                <ng-container matColumnDef="regionName">
                                    <th mat-header-cell *matHeaderCellDef>Region</th>
                                    <td mat-cell *matCellDef="let element" class="location-cell" [title]="element.regionName">
                                        {{ element.regionName }}
                                    </td>
                                </ng-container>

                                <!-- Site Group Column -->
                                <ng-container matColumnDef="siteGroupName">
                                    <th mat-header-cell *matHeaderCellDef>Site Group</th>
                                    <td mat-cell *matCellDef="let element" class="location-cell" [title]="element.siteGroupName">
                                        {{ element.siteGroupName }}
                                    </td>
                                </ng-container>

                                <!-- Site Column -->
                                <ng-container matColumnDef="siteName">
                                    <th mat-header-cell *matHeaderCellDef>Site</th>
                                    <td mat-cell *matCellDef="let element" class="location-cell" [title]="element.siteName">
                                        {{ element.siteName }}
                                    </td>
                                </ng-container>

                                <!-- Sub Site Column -->
                                <ng-container matColumnDef="subSiteName">
                                    <th mat-header-cell *matHeaderCellDef>Owner Site</th>
                                    <td mat-cell *matCellDef="let element" class="location-cell" [title]="element.subSiteName">
                                        {{ element.subSiteName }}
                                    </td>
                                </ng-container>

                                <!-- Room Column -->
                                <ng-container matColumnDef="room">
                                    <th mat-header-cell *matHeaderCellDef>Room</th>
                                    <td mat-cell *matCellDef="let element" class="location-cell" [title]="element.room">
                                        {{ element.room }}
                                    </td>
                                </ng-container>

                                <!-- Asset Opname Status Column -->
                                <ng-container matColumnDef="processingStatus">
                                    <th mat-header-cell *matHeaderCellDef>Process</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span class="processing-status" [ngClass]="{
                                            'status-pending': element.processingStatus === 'pending',
                                            'status-edited': element.processingStatus === 'edited',
                                            'status-all-good': element.processingStatus === 'all_good',
                                        }">
                                        {{ element.processingStatus === 'pending' ? 'Pending' : element.processingStatus === 'edited' ? 'Diperbarui' : 'Sesuai' }}
                                        </span>
                                    </td>
                                </ng-container>

                                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</main>